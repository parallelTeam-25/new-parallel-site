name: Deploy to Hostinger

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Install lftp
      run: sudo apt-get update && sudo apt-get install -y lftp
    
    - name: Deploy with lftp
      run: |
        lftp -c "
          set ftp:ssl-allow no;
          set ftp:passive-mode yes;
          set net:timeout 30;
          open -u u399412635.parallel-ai.it,'y*xr=lgC!LM*J9n' 195.35.27.36;
          lcd .;
          cd public_html;
          mirror -R -e -v --delete --exclude='.git/' --exclude='.github/' --exclude='README.md' --exclude='.gitignore' .;
          quit
        "
        echo "Deploy completed successfully!"